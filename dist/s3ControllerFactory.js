import{S3Client as e}from"@aws-sdk/client-s3";import{createPresignedPost as s}from"@aws-sdk/s3-presigned-post";async function t(t){const c=new e({region:t.region,credentials:{accessKeyId:t.accessKeyId,secretAccessKey:t.secretAccessKey}});return async function(e,n){const a=t.getKey?await t.getKey(e):`${Date.now()+Math.random()}.json`,o=s(c,{Bucket:t.Bucket,Key:a,Conditions:[{acl:t.acl??"private"},{bucket:t.Bucket},{key:a},{"content-type":t.contentType??"application/json"}],Fields:{acl:t.acl??"private"},Expires:t.Expires??3600});n.json(o)}}export{t as default};